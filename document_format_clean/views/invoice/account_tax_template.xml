<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <template id="document_tax_totals">
            <!--
                Generic template to display tax totals in pdf reports.
                Used by invoices, SO and PO.

                ARGUMENTS:
                - tax_totals: dict in the form generated by account.move's _get_tax_totals.
            -->
            <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                <tr class="border-black o_subtotal" >
                    <td style="padding:0;"><strong t-esc="subtotal['name']"/></td>

                    <td style="padding:0;" class="text-right">
                        <span
                            t-att-class="oe_subtotal_footer_separator"
                            t-esc="subtotal['formatted_amount']"
                        />
                    </td>
                </tr>

                <t t-set="subtotal_to_show" t-value="subtotal['name']"/>
                <t t-call="document_format_clean.tax_groups_totals"/>
            </t>

            <!--Total amount with all taxes-->
            <tr class="border-black o_total">
                <td style="padding:0;"><strong>Total</strong></td>
                <td style="padding:0;" class="text-right">
                    <span t-esc="tax_totals['formatted_amount_total']"/>
                </td>
            </tr>
        </template>

        <template id="tax_groups_totals">
            <!--
                Generic template to display a list of tax groups with the related amounts.

                ARGUMENTS:
                - tax_totals: dict in the form generated by account.move's _get_tax_totals.
                - subtotal_to_show: The subtotal we need to render the groups from
            -->
            <t t-foreach="tax_totals['groups_by_subtotal'][subtotal_to_show]" t-as="amount_by_group">
                <tr>
                    <t t-if="len(tax_totals['groups_by_subtotal'][subtotal_to_show]) > 1 or (tax_totals['amount_untaxed'] != amount_by_group['tax_group_base_amount'])">
                        <td style="padding:0;">
                            <span t-esc="amount_by_group['tax_group_name']"/>
                            <span class="text-nowrap"> en
                                <t t-esc="amount_by_group['formatted_tax_group_base_amount']"/>
                            </span>
                        </td>
                        <td style="padding:0;" class="text-right o_price_total">
                            <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']"/>
                        </td>
                    </t>
                    <t t-else="">
                        <td style="padding:0;"><span class="text-nowrap" t-esc="amount_by_group['tax_group_name']"/></td>
                        <td style="padding:0;" class="text-right o_price_total">
                            <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']" />
                        </td>
                    </t>
                </tr>
            </t>
        </template>
    </data>
</odoo>
